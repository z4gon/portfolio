<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Unity: Physics Projectiles, Coroutines and Object Pooling</title><meta name="title" content="Unity: Physics Projectiles, Coroutines and Object Pooling"/><meta name="description" content="Using Corotuines and Object Pools to instantiate projectiles, and Ribidbodies for simple physics."/><meta property="og:type" content="website"/><meta property="og:url" content="https://z4gon.github.io/blog/unity-5-projectiles-object-pooling"/><meta property="og:title" content="Unity: Physics Projectiles, Coroutines and Object Pooling"/><meta property="og:description" content="Using Corotuines and Object Pools to instantiate projectiles, and Ribidbodies for simple physics."/><meta property="og:image" content="https://z4gon.github.io/resources/blog/unity-5-projectiles-object-pooling/3.jpg"/><meta property="twitter:card" content="summary_large_image"/><meta property="twitter:url" content="https://z4gon.github.io/blog/unity-5-projectiles-object-pooling"/><meta property="twitter:title" content="Unity: Physics Projectiles, Coroutines and Object Pooling"/><meta property="twitter:description" content="Using Corotuines and Object Pools to instantiate projectiles, and Ribidbodies for simple physics."/><meta property="twitter:image" content="https://z4gon.github.io/resources/blog/unity-5-projectiles-object-pooling/3.jpg"/><link rel="icon" href="https://z4gon.github.io/favicon.ico"/><link rel="canonical" href="https://z4gon.github.io/blog/unity-5-projectiles-object-pooling"/><meta name="next-head-count" content="17"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/6977f21cab8e9b57.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/6977f21cab8e9b57.css" crossorigin="" data-n-g=""/><link rel="preload" href="/_next/static/css/5a340d8a16dc1671.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/5a340d8a16dc1671.css" crossorigin="" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-32f7cd90361c570e.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/framework-84e59a54b2c6310c.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/main-26004385ac3e7a0c.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/_app-518f45bb9ab3b37e.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/151-ef96bc01dc1e0393.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/358-e313e4af446296c8.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/191-5d69143cd774b360.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-e5aadef2519f8f71.js" defer="" crossorigin=""></script><script src="/_next/static/8ZLfMvmOGBmR9cd-m5c5p/_buildManifest.js" defer="" crossorigin=""></script><script src="/_next/static/8ZLfMvmOGBmR9cd-m5c5p/_ssgManifest.js" defer="" crossorigin=""></script><style data-href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,500;0,700;1,300;1,500&display=swap">@font-face{font-family:'Open Sans';font-style:italic;font-weight:300;font-stretch:normal;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memQYaGs126MiZpBA-UFUIcVXSCEkx2cmqvXlWq8tWZ0Pw86hd0Rk5hkaVQ.woff) format('woff')}@font-face{font-family:'Open Sans';font-style:italic;font-weight:500;font-stretch:normal;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memQYaGs126MiZpBA-UFUIcVXSCEkx2cmqvXlWq8tWZ0Pw86hd0Rk_RkaVQ.woff) format('woff')}@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;font-stretch:normal;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memSYaGs126MiZpBA-UvWbX2vVnXBbObj2OVZyOOSr4dVJWUgsiH0C4k.woff) format('woff')}@font-face{font-family:'Open Sans';font-style:normal;font-weight:500;font-stretch:normal;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memSYaGs126MiZpBA-UvWbX2vVnXBbObj2OVZyOOSr4dVJWUgsjr0C4k.woff) format('woff')}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:normal;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memSYaGs126MiZpBA-UvWbX2vVnXBbObj2OVZyOOSr4dVJWUgsg-1y4k.woff) format('woff')}@font-face{font-family:'Open Sans';font-style:italic;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memtYaGs126MiZpBA-UFUIcVXSCEkx2cmqvXlWqWtE6FxZCJgvAQ.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Open Sans';font-style:italic;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memtYaGs126MiZpBA-UFUIcVXSCEkx2cmqvXlWqWvU6FxZCJgvAQ.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Open Sans';font-style:italic;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memtYaGs126MiZpBA-UFUIcVXSCEkx2cmqvXlWqWtU6FxZCJgvAQ.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Open Sans';font-style:italic;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memtYaGs126MiZpBA-UFUIcVXSCEkx2cmqvXlWqWuk6FxZCJgvAQ.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Open Sans';font-style:italic;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memtYaGs126MiZpBA-UFUIcVXSCEkx2cmqvXlWqWu06FxZCJgvAQ.woff2) format('woff2');unicode-range:U+0590-05FF,U+200C-2010,U+20AA,U+25CC,U+FB1D-FB4F}@font-face{font-family:'Open Sans';font-style:italic;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memtYaGs126MiZpBA-UFUIcVXSCEkx2cmqvXlWqWtk6FxZCJgvAQ.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Open Sans';font-style:italic;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memtYaGs126MiZpBA-UFUIcVXSCEkx2cmqvXlWqWt06FxZCJgvAQ.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Open Sans';font-style:italic;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memtYaGs126MiZpBA-UFUIcVXSCEkx2cmqvXlWqWuU6FxZCJgg.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Open Sans';font-style:italic;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memtYaGs126MiZpBA-UFUIcVXSCEkx2cmqvXlWqWtE6FxZCJgvAQ.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Open Sans';font-style:italic;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memtYaGs126MiZpBA-UFUIcVXSCEkx2cmqvXlWqWvU6FxZCJgvAQ.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Open Sans';font-style:italic;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memtYaGs126MiZpBA-UFUIcVXSCEkx2cmqvXlWqWtU6FxZCJgvAQ.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Open Sans';font-style:italic;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memtYaGs126MiZpBA-UFUIcVXSCEkx2cmqvXlWqWuk6FxZCJgvAQ.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Open Sans';font-style:italic;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memtYaGs126MiZpBA-UFUIcVXSCEkx2cmqvXlWqWu06FxZCJgvAQ.woff2) format('woff2');unicode-range:U+0590-05FF,U+200C-2010,U+20AA,U+25CC,U+FB1D-FB4F}@font-face{font-family:'Open Sans';font-style:italic;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memtYaGs126MiZpBA-UFUIcVXSCEkx2cmqvXlWqWtk6FxZCJgvAQ.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Open Sans';font-style:italic;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memtYaGs126MiZpBA-UFUIcVXSCEkx2cmqvXlWqWt06FxZCJgvAQ.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Open Sans';font-style:italic;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memtYaGs126MiZpBA-UFUIcVXSCEkx2cmqvXlWqWuU6FxZCJgg.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSKmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSumu0SC55K5gw.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSOmu0SC55K5gw.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSymu0SC55K5gw.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTS2mu0SC55K5gw.woff2) format('woff2');unicode-range:U+0590-05FF,U+200C-2010,U+20AA,U+25CC,U+FB1D-FB4F}@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSCmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSGmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTS-mu0SC55I.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Open Sans';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSKmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Open Sans';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSumu0SC55K5gw.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Open Sans';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSOmu0SC55K5gw.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSymu0SC55K5gw.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTS2mu0SC55K5gw.woff2) format('woff2');unicode-range:U+0590-05FF,U+200C-2010,U+20AA,U+25CC,U+FB1D-FB4F}@font-face{font-family:'Open Sans';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSCmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Open Sans';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSGmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTS-mu0SC55I.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSKmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSumu0SC55K5gw.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSOmu0SC55K5gw.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSymu0SC55K5gw.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTS2mu0SC55K5gw.woff2) format('woff2');unicode-range:U+0590-05FF,U+200C-2010,U+20AA,U+25CC,U+FB1D-FB4F}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSCmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTSGmu0SC55K5gw.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/opensans/v36/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTS-mu0SC55I.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><div class="Page_page__ihMwS"><nav class="NavBar_navbar__w9NXx"><ul class="NavBar_links__9ZJCr"><li><a class="NavBar_titleLink__HKe5A" href="/"><h1>Gonzalo Cumini</h1></a></li><li class="NavBar_secondaryLink__dJ_Rh"><a href="/"><h1>Portfolio</h1></a></li><li class="NavBar_secondaryLink__dJ_Rh"><a href="/blog"><h1>Blog</h1></a></li></ul><ul class="NavBar_icons__PLRGq"><li class="NavBar_icon__4VX97"><a href="https://linkedin.com/in/gonzacn" rel="noopener noreferrer" target="_blank"><svg class="IconLink_iconSvg__HQHTJ" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path></svg></a></li><li class="NavBar_icon__4VX97"><a href="https://github.com/z4gon" rel="noopener noreferrer" target="_blank"><svg class="IconLink_iconSvg__HQHTJ" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg></a></li></ul></nav><main class="Container_container__CIG8D Container_narrow__6D5o0"><div style="padding-top:3.5em"></div><article><div class="PostHeader_postHeader__1GQNl"><h1 class="PostTitle_postTitle__G1cvD">Unity: Physics Projectiles, Coroutines and Object Pooling</h1><div class="PostHeader_authorAndDate__V6fIl"><div class="Avatar_avatar__sGq0F"><img src="/images/avatars/z4gon.jpg" alt="Gonzalo Cumini"/><div class="Avatar_name__HX0Sd">Gonzalo Cumini</div></div><time class="DateFormatter_dateFormatter__xPoqI" dateTime="2023-06-03T00:00:00.000Z">June	3, 2023</time></div><video muted="" playsinline="" controls="" class="PostHeader_heroVideo__HpC1E"><source src="/resources/blog/unity-5-projectiles-object-pooling/1.mp4" type="video/mp4"/></video></div><div class="MarkdownContent_markdownContent__DDbG5"><h2 id="references">References</h2>
<ul>
<li><a href="https://docs.unity3d.com/ScriptReference/Pool.ObjectPool_1.html">ObjectPool</a></li>
<li><a href="https://docs.unity3d.com/ScriptReference/Pool.ObjectPool_1-ctor.html">ObjectPool Constructor</a></li>
<li><a href="https://docs.unity3d.com/2017.1/Documentation/ScriptReference/MonoBehaviour.OnDestroy.html">OnDestroy</a></li>
</ul>
<h2 id="table-of-content">Table of Content</h2>
<ul>
<li><a href="#references">References</a></li>
<li><a href="#table-of-content">Table of Content</a></li>
<li><a href="#projectile-bullet">Projectile: Bullet</a></li>
<li><a href="#objectpool-gun">ObjectPool: Gun</a>
<ul>
<li><a href="#properties">Properties</a></li>
<li><a href="#initialize-object-pool">Initialize Object Pool</a></li>
<li><a href="#object-pool-event-handlers">Object Pool Event Handlers</a></li>
<li><a href="#shoot-projectiles">Shoot Projectiles</a></li>
</ul>
</li>
<li><a href="#player">Player</a></li>
<li><a href="#all-the-pieces-together">All the Pieces Together</a></li>
<li><a href="#correcting-projectile-trajectory">Correcting Projectile Trajectory</a></li>
</ul>
<hr/>
<h2 id="projectile--bullet">Projectile: Bullet</h2>
<ul>
<li>For now, a simple component that has a <code>Collider</code> and a <code>Rigidbody</code>.</li>
<li>The <code>Rigidbody</code> will not be kinematic, to be able to use <code>Velocity</code>. And will ignore gravity, to follow a straight line.</li>
</ul>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-cs" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">1</span><span class="token" style="color:rgb(127, 219, 202)">public</span><span> </span><span class="token return-type" style="color:rgb(127, 219, 202)">float</span><span> speed
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">2</span><span></span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">3</span><span>    </span><span class="token" style="color:rgb(127, 219, 202)">get</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">return</span><span> rigidBody</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>velocity</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>z</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">4</span><span>    </span><span class="token" style="color:rgb(127, 219, 202)">set</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span> rigidBody</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token" style="color:rgb(130, 170, 255)">AddForce</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span>transform</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>forward </span><span class="token" style="color:rgb(127, 219, 202)">*</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">value</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> ForceMode</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>VelocityChange</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">5</span><span></span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">6</span><span></span><span class="token" style="color:rgb(127, 219, 202)">private</span><span> </span><span class="token" style="color:rgb(255, 203, 139)">Rigidbody</span><span> rigidBody</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">7</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">8</span><span></span><span class="token" style="color:rgb(127, 219, 202)">private</span><span> </span><span class="token return-type" style="color:rgb(127, 219, 202)">void</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">Awake</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">9</span><span></span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">10</span><span>    rigidBody </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> </span><span class="token generic-method" style="color:rgb(130, 170, 255)">GetComponent</span><span class="token generic-method generic" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generic-method generic" style="color:rgb(255, 203, 139)">Rigidbody</span><span class="token generic-method generic" style="color:rgb(199, 146, 234)">&gt;</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">11</span><span></span><span class="token" style="color:rgb(199, 146, 234)">}</span></code></div></pre>
<hr/>
<h2 id="objectpool--gun">ObjectPool: Gun</h2>
<ul>
<li>This component will use the <code>ObjectPool</code> to store the <code>Bullet</code> game objects.</li>
<li>It will also define a <code>Coroutine</code> to periodically fire the gun, and shoot projectiles.</li>
</ul>
<h3 id="properties">Properties</h3>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-cs" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">1</span><span class="token" style="color:rgb(127, 219, 202)">public</span><span> </span><span class="token" style="color:rgb(255, 203, 139)">Bullet</span><span> bulletPrefab</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">2</span><span></span><span class="token" style="color:rgb(127, 219, 202)">public</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">float</span><span> bulletsPerSecond</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">3</span><span></span><span class="token" style="color:rgb(127, 219, 202)">public</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">float</span><span> bulletSpeed</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">4</span><span></span><span class="token" style="color:rgb(127, 219, 202)">public</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">int</span><span> defaultBulletsPoolCapacity </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> </span><span class="token" style="color:rgb(247, 140, 108)">10</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">5</span><span></span><span class="token" style="color:rgb(127, 219, 202)">public</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">int</span><span> maxBulletsPoolSize </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> </span><span class="token" style="color:rgb(247, 140, 108)">20</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">6</span><span></span><span class="token" style="color:rgb(127, 219, 202)">private</span><span> </span><span class="token" style="color:rgb(255, 203, 139)">ObjectPool</span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(255, 203, 139)">Bullet</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span> bulletsPool</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">7</span><span></span><span class="token" style="color:rgb(127, 219, 202)">private</span><span> </span><span class="token" style="color:rgb(255, 203, 139)">Coroutine</span><span> shootCoroutine</span><span class="token" style="color:rgb(199, 146, 234)">;</span></code></div></pre>
<h3 id="initialize-object-pool">Initialize Object Pool</h3>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-cs" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">1</span><span class="token return-type" style="color:rgb(127, 219, 202)">void</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">Awake</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">2</span><span></span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">3</span><span>    bulletsPool </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">new</span><span> </span><span class="token constructor-invocation" style="color:rgb(255, 203, 139)">ObjectPool</span><span class="token constructor-invocation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token constructor-invocation" style="color:rgb(255, 203, 139)">Bullet</span><span class="token constructor-invocation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">4</span><span>        </span><span class="token named-parameter" style="color:rgb(199, 146, 234)">createFunc</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> CreatePooledBullet</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">5</span><span>        </span><span class="token named-parameter" style="color:rgb(199, 146, 234)">actionOnGet</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> OnGetBulletFromPool</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">6</span><span>        </span><span class="token named-parameter" style="color:rgb(199, 146, 234)">actionOnRelease</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> OnReleaseBulletToPool</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">7</span><span>        </span><span class="token named-parameter" style="color:rgb(199, 146, 234)">actionOnDestroy</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> OnDestroyBulletFromPool</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">8</span><span>        </span><span class="token named-parameter" style="color:rgb(199, 146, 234)">collectionCheck</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> </span><span class="token" style="color:rgb(255, 88, 116)">true</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">9</span><span>        </span><span class="token named-parameter" style="color:rgb(199, 146, 234)">defaultCapacity</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> defaultBulletsPoolCapacity</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">10</span><span>        </span><span class="token named-parameter" style="color:rgb(199, 146, 234)">maxSize</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> maxBulletsPoolSize
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">11</span><span>    </span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">12</span><span></span><span class="token" style="color:rgb(199, 146, 234)">}</span></code></div></pre>
<h3 id="object-pool-event-handlers">Object Pool Event Handlers</h3>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-cs" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">1</span><span class="token" style="color:rgb(127, 219, 202)">private</span><span> </span><span class="token return-type" style="color:rgb(255, 203, 139)">Bullet</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">CreatePooledBullet</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">=&gt;</span><span> Object</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token" style="color:rgb(130, 170, 255)">Instantiate</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span>bulletPrefab</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> transform</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>position</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> transform</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>rotation</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">2</span><span></span><span class="token" style="color:rgb(127, 219, 202)">private</span><span> </span><span class="token return-type" style="color:rgb(127, 219, 202)">void</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">OnGetBulletFromPool</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(255, 203, 139)">Bullet</span><span> bullet</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">=&gt;</span><span> bullet</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>gameObject</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token" style="color:rgb(130, 170, 255)">SetActive</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(255, 88, 116)">true</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">3</span><span></span><span class="token" style="color:rgb(127, 219, 202)">private</span><span> </span><span class="token return-type" style="color:rgb(127, 219, 202)">void</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">OnReleaseBulletToPool</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(255, 203, 139)">Bullet</span><span> bullet</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">=&gt;</span><span> bullet</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>gameObject</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token" style="color:rgb(130, 170, 255)">SetActive</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(255, 88, 116)">false</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">4</span><span></span><span class="token return-type" style="color:rgb(127, 219, 202)">void</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">OnDestroyBulletFromPool</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(255, 203, 139)">Bullet</span><span> bullet</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">=&gt;</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">Destroy</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span>bullet</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>gameObject</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span></code></div></pre>
<h3 id="shoot-projectiles">Shoot Projectiles</h3>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-cs" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">1</span><span class="token" style="color:rgb(127, 219, 202)">public</span><span> </span><span class="token return-type" style="color:rgb(127, 219, 202)">void</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">StartShooting</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">2</span><span></span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">3</span><span>    shootCoroutine </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">StartCoroutine</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(130, 170, 255)">Shoot</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">4</span><span></span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">5</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">6</span><span></span><span class="token" style="color:rgb(127, 219, 202)">public</span><span> </span><span class="token return-type" style="color:rgb(127, 219, 202)">void</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">StopShooting</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">=&gt;</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">StopCoroutine</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span>shootCoroutine</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">7</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">8</span><span></span><span class="token" style="color:rgb(127, 219, 202)">private</span><span> </span><span class="token return-type" style="color:rgb(255, 203, 139)">IEnumerator</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">Shoot</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">9</span><span></span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">10</span><span>    </span><span class="token" style="color:rgb(127, 219, 202)">while</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(255, 88, 116)">true</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">11</span><span>    </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">12</span><span>        </span><span class="token" style="color:rgb(127, 219, 202)">var</span><span> bullet </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> bulletsPool</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token" style="color:rgb(130, 170, 255)">Get</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">13</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">14</span><span>        </span><span class="token" style="color:rgb(127, 219, 202)">if</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">(</span><span>bullet </span><span class="token" style="color:rgb(127, 219, 202)">!=</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">null</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">15</span><span>        </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">16</span><span>            bullet</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>transform</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>position </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> transform</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>position</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">17</span><span>            bullet</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>transform</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>rotation </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> transform</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>rotation</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">18</span><span>            bullet</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>speed </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> bulletSpeed</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">19</span><span>        </span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">20</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">21</span><span>        </span><span class="token" style="color:rgb(127, 219, 202)">yield</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">return</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">new</span><span> </span><span class="token constructor-invocation" style="color:rgb(255, 203, 139)">WaitForSeconds</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(247, 140, 108)">1.0f</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">/</span><span> bulletsPerSecond</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">22</span><span>    </span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">23</span><span></span><span class="token" style="color:rgb(199, 146, 234)">}</span></code></div></pre>
<hr/>
<h2 id="player">Player</h2>
<ul>
<li>The <code>Player</code> game object will react to player input, and shoot projectiles.</li>
</ul>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-cs" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">1</span><span class="token" style="color:rgb(127, 219, 202)">public</span><span> </span><span class="token" style="color:rgb(255, 203, 139)">List</span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(255, 203, 139)">Gun</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span> guns </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">new</span><span> </span><span class="token constructor-invocation" style="color:rgb(255, 203, 139)">List</span><span class="token constructor-invocation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token constructor-invocation" style="color:rgb(255, 203, 139)">Gun</span><span class="token constructor-invocation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">2</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">3</span><span></span><span class="token" style="color:rgb(127, 219, 202)">public</span><span> </span><span class="token return-type" style="color:rgb(127, 219, 202)">void</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">OnShootAction</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(255, 203, 139)">InputAction</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token" style="color:rgb(255, 203, 139)">CallbackContext</span><span> context</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">4</span><span></span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">5</span><span>    </span><span class="token" style="color:rgb(127, 219, 202)">if</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">(</span><span>context</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>performed</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">6</span><span>        </span><span class="token" style="color:rgb(130, 170, 255)">StartShooting</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">7</span><span>    </span><span class="token" style="color:rgb(127, 219, 202)">else</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">if</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">(</span><span>context</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>canceled</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">8</span><span>        </span><span class="token" style="color:rgb(130, 170, 255)">StopShooting</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">9</span><span></span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">10</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">11</span><span></span><span class="token" style="color:rgb(127, 219, 202)">private</span><span> </span><span class="token return-type" style="color:rgb(127, 219, 202)">void</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">StartShooting</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">12</span><span></span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">13</span><span>    </span><span class="token" style="color:rgb(127, 219, 202)">foreach</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(127, 219, 202)">var</span><span> gun </span><span class="token" style="color:rgb(127, 219, 202)">in</span><span> guns</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">14</span><span>        gun</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token" style="color:rgb(130, 170, 255)">StartShooting</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">15</span><span></span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">16</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">17</span><span></span><span class="token" style="color:rgb(127, 219, 202)">private</span><span> </span><span class="token return-type" style="color:rgb(127, 219, 202)">void</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">StopShooting</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">18</span><span></span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">19</span><span>    </span><span class="token" style="color:rgb(127, 219, 202)">foreach</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(127, 219, 202)">var</span><span> gun </span><span class="token" style="color:rgb(127, 219, 202)">in</span><span> guns</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">20</span><span>        gun</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token" style="color:rgb(130, 170, 255)">StopShooting</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">21</span><span></span><span class="token" style="color:rgb(199, 146, 234)">}</span></code></div></pre>
<hr/>
<h2 id="all-the-pieces-together">All the Pieces Together</h2>
<p><img src="/resources/blog/unity-5-projectiles-object-pooling/1.jpg" alt="Picture"/></p>
<hr/>
<h2 id="correcting-projectile-trajectory">Correcting Projectile Trajectory</h2>
<ul>
<li>Given the perspective of the camera, projectiles that are aligned to the direction of the player do not follow a straight line in the viewport.</li>
<li>This is a problem since the player won&#x27;t be able to aim for enemies in the top left and right corners.</li>
</ul>
<p><img src="/resources/blog/unity-5-projectiles-object-pooling/2.jpg" alt="Picture"/></p>
<ul>
<li>Using a <code>Raycast</code> again, to get the corresponding point at the top edge, we can make the <code>Player</code> to <code>LookAt</code> it.</li>
<li>This effectively makes the aiming dynamic, and keeps a straight like of projectiles in the viewport.</li>
</ul>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-cs" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">1</span><span class="token" style="color:rgb(127, 219, 202)">public</span><span> </span><span class="token return-type" style="color:rgb(127, 219, 202)">void</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">OnPointerPosition</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(255, 203, 139)">InputAction</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token" style="color:rgb(255, 203, 139)">CallbackContext</span><span> context</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">2</span><span></span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">3</span><span>    </span><span class="token range" style="color:rgb(127, 219, 202)">..</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">4</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">5</span><span>    </span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">// look at</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">6</span><span>    point </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">new</span><span> </span><span class="token constructor-invocation" style="color:rgb(255, 203, 139)">Vector2</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span>point</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>x</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> Screen</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>height</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">7</span><span>    ray </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> mainCamera</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token" style="color:rgb(130, 170, 255)">ScreenPointToRay</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span>point</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">8</span><span>    </span><span class="token" style="color:rgb(127, 219, 202)">if</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">(</span><span>boundaries</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>plane</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token" style="color:rgb(130, 170, 255)">Raycast</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span>ray</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">out</span><span> distance</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">9</span><span>    </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">10</span><span>        transform</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token" style="color:rgb(130, 170, 255)">LookAt</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span>ray</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token" style="color:rgb(130, 170, 255)">GetPoint</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span>distance</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> Vector3</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>up</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">11</span><span>    </span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:rgb(99, 119, 119);font-style:italic">12</span><span></span><span class="token" style="color:rgb(199, 146, 234)">}</span></code></div></pre>
<p><img src="/resources/blog/unity-5-projectiles-object-pooling/3.jpg" alt="Picture"/></p></div></article><div style="padding-top:3.5em"></div></main><footer class="Footer_footer__Cw0If"><p>©<!-- --> 2023, Gonzalo Cumini</p><ul class="Footer_icons__HHXih"><li class="Footer_icon__s6wu9"><a href="https://linkedin.com/in/gonzacn" rel="noopener noreferrer" target="_blank"><svg class="IconLink_iconSvg__HQHTJ" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path></svg></a></li><li class="Footer_icon__s6wu9"><a href="https://github.com/z4gon" rel="noopener noreferrer" target="_blank"><svg class="IconLink_iconSvg__HQHTJ" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg></a></li></ul></footer></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"post":{"slug":"unity-5-projectiles-object-pooling","date":"2023-06-03T00:00:00.000Z","author":{"name":"Gonzalo Cumini","pictureUrl":"/images/avatars/z4gon.jpg"},"title":"Unity: Physics Projectiles, Coroutines and Object Pooling","excerpt":"Using Corotuines and Object Pools to instantiate projectiles, and Ribidbodies for simple physics.","heroImageUrl":"/resources/blog/unity-5-projectiles-object-pooling/3.jpg","heroImageSourceUrl":"","heroVideoUrl":"/resources/blog/unity-5-projectiles-object-pooling/1.mp4","markdownContent":"\n## References\n\n- [ObjectPool](https://docs.unity3d.com/ScriptReference/Pool.ObjectPool_1.html)\n- [ObjectPool Constructor](https://docs.unity3d.com/ScriptReference/Pool.ObjectPool_1-ctor.html)\n- [OnDestroy](https://docs.unity3d.com/2017.1/Documentation/ScriptReference/MonoBehaviour.OnDestroy.html)\n\n## Table of Content\n\n- [References](#references)\n- [Table of Content](#table-of-content)\n- [Projectile: Bullet](#projectile-bullet)\n- [ObjectPool: Gun](#objectpool-gun)\n  - [Properties](#properties)\n  - [Initialize Object Pool](#initialize-object-pool)\n  - [Object Pool Event Handlers](#object-pool-event-handlers)\n  - [Shoot Projectiles](#shoot-projectiles)\n- [Player](#player)\n- [All the Pieces Together](#all-the-pieces-together)\n- [Correcting Projectile Trajectory](#correcting-projectile-trajectory)\n\n---\n\n## Projectile: Bullet\n\n- For now, a simple component that has a `Collider` and a `Rigidbody`.\n- The `Rigidbody` will not be kinematic, to be able to use `Velocity`. And will ignore gravity, to follow a straight line.\n\n```cs\npublic float speed\n{\n    get { return rigidBody.velocity.z; }\n    set { rigidBody.AddForce(transform.forward * value, ForceMode.VelocityChange); }\n}\nprivate Rigidbody rigidBody;\n\nprivate void Awake()\n{\n    rigidBody = GetComponent\u003cRigidbody\u003e();\n}\n```\n\n---\n\n## ObjectPool: Gun\n\n- This component will use the `ObjectPool` to store the `Bullet` game objects.\n- It will also define a `Coroutine` to periodically fire the gun, and shoot projectiles.\n\n### Properties\n\n```cs\npublic Bullet bulletPrefab;\npublic float bulletsPerSecond;\npublic float bulletSpeed;\npublic int defaultBulletsPoolCapacity = 10;\npublic int maxBulletsPoolSize = 20;\nprivate ObjectPool\u003cBullet\u003e bulletsPool;\nprivate Coroutine shootCoroutine;\n```\n\n### Initialize Object Pool\n\n```cs\nvoid Awake()\n{\n    bulletsPool = new ObjectPool\u003cBullet\u003e(\n        createFunc: CreatePooledBullet,\n        actionOnGet: OnGetBulletFromPool,\n        actionOnRelease: OnReleaseBulletToPool,\n        actionOnDestroy: OnDestroyBulletFromPool,\n        collectionCheck: true,\n        defaultCapacity: defaultBulletsPoolCapacity,\n        maxSize: maxBulletsPoolSize\n    );\n}\n```\n\n### Object Pool Event Handlers\n\n```cs\nprivate Bullet CreatePooledBullet() =\u003e Object.Instantiate(bulletPrefab, transform.position, transform.rotation);\nprivate void OnGetBulletFromPool(Bullet bullet) =\u003e bullet.gameObject.SetActive(true);\nprivate void OnReleaseBulletToPool(Bullet bullet) =\u003e bullet.gameObject.SetActive(false);\nvoid OnDestroyBulletFromPool(Bullet bullet) =\u003e Destroy(bullet.gameObject);\n```\n\n### Shoot Projectiles\n\n```cs\npublic void StartShooting()\n{\n    shootCoroutine = StartCoroutine(Shoot());\n}\n\npublic void StopShooting() =\u003e StopCoroutine(shootCoroutine);\n\nprivate IEnumerator Shoot()\n{\n    while (true)\n    {\n        var bullet = bulletsPool.Get();\n\n        if (bullet != null)\n        {\n            bullet.transform.position = transform.position;\n            bullet.transform.rotation = transform.rotation;\n            bullet.speed = bulletSpeed;\n        }\n\n        yield return new WaitForSeconds(1.0f / bulletsPerSecond);\n    }\n}\n```\n\n---\n\n## Player\n\n- The `Player` game object will react to player input, and shoot projectiles.\n\n```cs\npublic List\u003cGun\u003e guns = new List\u003cGun\u003e();\n\npublic void OnShootAction(InputAction.CallbackContext context)\n{\n    if (context.performed)\n        StartShooting();\n    else if (context.canceled)\n        StopShooting();\n}\n\nprivate void StartShooting()\n{\n    foreach (var gun in guns)\n        gun.StartShooting();\n}\n\nprivate void StopShooting()\n{\n    foreach (var gun in guns)\n        gun.StopShooting();\n}\n```\n\n---\n\n## All the Pieces Together\n\n![Picture](/resources/blog/unity-5-projectiles-object-pooling/1.jpg)\n\n---\n\n## Correcting Projectile Trajectory\n\n- Given the perspective of the camera, projectiles that are aligned to the direction of the player do not follow a straight line in the viewport.\n- This is a problem since the player won't be able to aim for enemies in the top left and right corners.\n\n![Picture](/resources/blog/unity-5-projectiles-object-pooling/2.jpg)\n\n- Using a `Raycast` again, to get the corresponding point at the top edge, we can make the `Player` to `LookAt` it.\n- This effectively makes the aiming dynamic, and keeps a straight like of projectiles in the viewport.\n\n```cs\npublic void OnPointerPosition(InputAction.CallbackContext context)\n{\n    ...\n\n    // look at\n    point = new Vector2(point.x, Screen.height);\n    ray = mainCamera.ScreenPointToRay(point);\n    if (boundaries.plane.Raycast(ray, out distance))\n    {\n        transform.LookAt(ray.GetPoint(distance), Vector3.up);\n    }\n}\n```\n\n![Picture](/resources/blog/unity-5-projectiles-object-pooling/3.jpg)\n"}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"unity-5-projectiles-object-pooling"},"buildId":"8ZLfMvmOGBmR9cd-m5c5p","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>